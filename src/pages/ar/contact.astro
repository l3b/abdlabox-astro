---
// src/pages/ar/contact.astro - Implemented Cal.com Popup Embed
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Icon } from 'astro-icon/components';
// Make sure this path and extension (.ts, .yaml, .js) matches your data file!
import socialLinks from '../../data/socialLinks.ts';

const pageTitle = "Ø£Ø±Ø³Ù„ Ø¥Ø´Ø§Ø±Ø©";
const pageDescription = "Ù‚Ø¯ Ù„Ø§ Ù†Ø¹Ø±Ù Ø¨Ø¹Ø¶Ù†Ø§ØŒ Ù„ÙƒÙ† Ø¥Ø´Ø§Ø±Ø§ØªÙ†Ø§ Ù‚Ø¯ ØªØªÙ‚Ø§Ø·Ø¹ ÙÙŠ Ù„Ø­Ø¸Ø©Ù Ù…Ø§.";

// Grouping and sorting logic for links (remains the same)
const linkCategories = socialLinks.reduce((acc, link) => {
  const category = link.category || 'Other';
  if (!acc[category]) { acc[category] = []; }
  acc[category].push(link);
  return acc;
}, {} as Record<string, typeof socialLinks>);

const categoryOrder = ['Professional', 'Writing', 'Activity', 'Learning', 'Reading', 'Media', 'Other'];
const sortedCategories = Object.keys(linkCategories).sort((a, b) => {
    const indexA = categoryOrder.indexOf(a);
    const indexB = categoryOrder.indexOf(b);
    if (indexA === -1 && indexB === -1) return a.localeCompare(b);
    if (indexA === -1) return 1;
    if (indexB === -1) return -1;
    return indexA - indexB;
});

// const calComUrl = "https://cal.com/your-username"; // No longer needed for simple link
---
<BaseLayout title={pageTitle} description={pageDescription} lang="ar" dir="rtl">
  <div class="container mx-auto px-4 py-8 md:px-6 md:py-12">

    {/* Page Title */}
    <h1 class="inline-block text-3xl md:text-4xl font-bold mb-8 text-soft-charcoal pb-2 border-b-2 border-b-neon-yellow">
      <span class="ms-3">ğŸ“¡</span>{pageTitle}
    </h1>

    {/* Intro content area */}
    <div class="max-w-prose space-y-6 text-lg leading-relaxed mb-12 text-soft-charcoal">
      <p>Ù‚Ø¯ Ù„Ø§ Ù†Ø¹Ø±Ù Ø¨Ø¹Ø¶Ù†Ø§ØŒ</p>
      <p>
        Ù„ÙƒÙ† Ø¥Ø´Ø§Ø±Ø§ØªÙ†Ø§ Ù‚Ø¯ ØªØªÙ‚Ø§Ø·Ø¹ ÙÙŠ Ù„Ø­Ø¸Ø©Ù Ù…Ø§.
        Ø¥Ù† ÙƒÙ†Øª ØªÙ‚Ø±Ø£ Ù‡Ø°Ù‡ Ø§Ù„Ø³Ø·ÙˆØ±ØŒ ÙØ±Ø¨Ù…Ø§ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠØ³ØªØ­Ù‚ Ø£Ù† ÙŠÙØ´Ø§Ø±Ùƒ â€” ÙÙƒØ±Ø©ØŒ Ù…Ù„Ø§Ø­Ø¸Ø©ØŒ Ø£Ùˆ Ø­ØªÙ‰ ÙØ¶ÙˆÙ„ ØµØ§Ù…Øª.
      </p>
      <p>
        ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ±Ø³Ù„ Ø¥Ø´Ø§Ø±ØªÙƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø£Ø¯Ù†Ø§Ù‡ØŒ
        Ø£Ùˆ ØªØ¬Ø¯ ÙˆÙ‚ØªÙ‹Ø§ Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§ Ù„Ù†ØªØ­Ø¯Ø« ÙˆØ¬Ù‡Ù‹Ø§ Ù„ÙˆØ¬Ù‡ (Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§)ØŒ
        Ø£Ùˆ Ø¨Ø¨Ø³Ø§Ø·Ø©ØŒ ØªÙ„Ø­Ù‚ Ø£Ø«Ø±ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠ ÙÙŠ Ø¥Ø­Ø¯Ù‰ Ø§Ù„ÙƒØ«Ø¨Ø§Ù† Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©.
      </p>
    </div>

    {/* Sections in a Grid */}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-10">

      {/* Left Column (Form & Scheduling) */}
      <div class="space-y-10">
        {/* Contact Form Placeholder */}
        <section>
          <h2 class="text-2xl font-semibold mb-4 text-electric-blue flex items-center gap-2">
             <span class="text-2xl">âœï¸</span>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©
          </h2>
          <p class="text-gray-600 mb-4">(Ø§Ù„Ø§Ø³Ù… â€“ Ø§Ù„Ø¨Ø±ÙŠØ¯ â€“ Ø§Ù„Ø±Ø³Ø§Ù„Ø©)</p>
           {/* Form implementation */}
           <form action="https://formspree.io/f/xgvkewgp" method="POST" class="space-y-4">
              <div>
                <label for="name" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Ø§Ù„Ø§Ø³Ù…</label>
                <input type="text" id="name" name="name" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-neon-yellow focus:border-transparent dark:bg-gray-700 dark:border-gray-600"/>
              </div>
              <div>
                <label for="email" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="email" name="_replyto" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-neon-yellow focus:border-transparent dark:bg-gray-700 dark:border-gray-600"/>
              </div>
              <div>
                <label for="message" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
                <textarea id="message" name="message" rows="5" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-neon-yellow focus:border-transparent dark:bg-gray-700 dark:border-gray-600"></textarea>
              </div>
              <div>
                <button type="submit" class="button">
                  Ø£Ø±Ø³Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©
                </button>
              </div>
            </form>
           <p class="text-sm text-gray-500 mt-3">ÙÙ‚Ø· Ø£Ø±Ø³Ù„ Ù…Ø§ ØªØ±ØºØ¨ Ø¨Ù‡ØŒ ÙˆØ³Ø£Ø¹ÙˆØ¯ Ù„Ùƒ Ø­ÙŠÙ† Ø£Ù„ØªÙ‚Ø· Ø§Ù„Ø¥Ø´Ø§Ø±Ø©.</p>
        </section>

        {/* Scheduling Section - UPDATED with Button Trigger */}
        <section>
           <h2 class="text-2xl font-semibold mb-4 text-electric-blue flex items-center gap-2">
             <span class="text-2xl">ğŸ—“ï¸</span>Ø¬Ø¯ÙˆÙ„Ø© Ø¥Ø´Ø§Ø±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
          </h2>
           <p class="mb-4 text-lg">
             Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø£Ø¯Ù†Ø§Ù‡ Ù„Ø­Ø¬Ø² ÙˆÙ‚Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø­Ø¯ÙŠØ«: {/* Updated Text */}
           </p>
           {/* Cal.com Trigger Button */}
           <button
             type="button"
             data-cal-link="abdla/30min"  /* Use your specific Cal link ID */
             data-cal-namespace="30min" /* Optional namespace */
             data-cal-config='{"layout":"month_view"}' /* Optional config */
             class="button"
           >
             Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ù‹Ø§ {/* Button Text */}
           </button>
           <p class="text-gray-600 mt-3">15 Ø£Ùˆ 30 Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ù† Ø§Ù„Ø­Ø¯ÙŠØ« â€” ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ.</p> {/* Adjusted spacing/wording */}
        </section>
      </div>

      {/* Right Column (Other Signals / Links) */}
      <section>
         {/* ... Social links section remains the same as last version ... */}
         <h2 class="text-2xl font-semibold mb-4 text-electric-blue flex items-center gap-2">
            <span class="text-2xl">ğŸŒ</span>Ø¥Ø´Ø§Ø±Ø§Øª Ø£Ø®Ø±Ù‰
         </h2>
         <p class="text-gray-600 mb-6">ØªÙØ¶Ù„ Ø¨Ù…ØªØ§Ø¨Ø¹ØªÙŠ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø£Ù…Ø§ÙƒÙ†ÙŠ Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª:</p>
         {sortedCategories.map(category => (
            <div class="mb-6">
                {/* Category label */}
                <h3 class="text-sm font-semibold uppercase text-gray-500 tracking-wider mb-4">{category}</h3>
                
                {/* Social links grid */}
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                    {linkCategories[category].map(link => (
                        <a
                            href={link.url}
                            target="_blank"
                            rel="noopener noreferrer me"
                            class="flex items-center gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 group border border-gray-100 dark:border-gray-700"
                        >
                            <div class="p-2 rounded-lg bg-gray-50 dark:bg-gray-700 group-hover:bg-lavender/10 dark:group-hover:bg-lavender/20 transition-colors duration-200">
                                <Icon
                                    name={link.icon}
                                    class="w-6 h-6 text-lavender group-hover:text-electric-blue transition-colors duration-200"
                                />
                            </div>
                            <span class="font-medium text-gray-700 dark:text-gray-300 group-hover:text-electric-blue dark:group-hover:text-lavender transition-colors duration-200">
                                {link.name}
                            </span>
                    ))}
                </div>
            </div>
         ))}
      </section>

    </div> {/* End grid */}

    {/* Closing Section */}
    <section class="mt-16 pt-8 border-t border-gray-300 text-center max-w-prose mx-auto">
        {/* ... closing content ... */}
        <h2 class="text-xl font-semibold mb-3 text-electric-blue">
            <span class="me-2">ğŸ›°ï¸
          </span> Ø¥Ù„Ù‰ Ø£Ù† ØªÙˆÙ…Ø¶ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ù…Ù† Ø¬Ø¯ÙŠØ¯
          
          </h2>
          <p class="text-lg text-gray-600 leading-relaxed">
              ÙˆØ¬ÙˆØ¯Ùƒ Ù‡Ù†Ø§ ÙŠØ¹Ù†ÙŠ Ø§Ù„ÙƒØ«ÙŠØ±.<br/>
              Ø§Ù‚Ø±Ø£ØŒ ØªÙˆØ§ØµÙ„ØŒ Ø£Ùˆ Ù…Ø±Ù‘ Ù…Ø±ÙˆØ± Ø§Ù„ÙƒØ±Ø§Ù…â€¦ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© ÙˆØµÙ„Øª.
          </p>
    </section>

  </div>

  {/* Add Cal.com Embed Script Here (just before closing BaseLayout) */}
  <script type="text/javascript" is:inline>
    (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
    Cal("init", "30min", {origin:"https://cal.com"});
    // Set UI options for the '30min' namespace trigger if needed
    Cal.ns["30min"]("ui", {"cssVarsPerTheme":{"light":{"cal-brand":"#1E2430"},"dark":{"cal-brand":"#cacabd"}},"hideEventTypeDetails":false,"layout":"month_view"});
  </script>

  


</BaseLayout>